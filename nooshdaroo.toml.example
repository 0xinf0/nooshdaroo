# Nooshdaroo Configuration Example
# نوشدارو - Protocol Shape-Shifting SOCKS Proxy

# Operating mode: "client" or "server"
mode = "client"

# Protocol library directory containing PSF files
protocol_dir = "protocols"

[encryption]
# Cipher: "chacha20-poly1305" or "aes-256-gcm"
cipher = "chacha20-poly1305"

# Key derivation: "argon2" or "pbkdf2"
key_derivation = "argon2"

# Strong password for encryption (CHANGE THIS!)
password = "your-very-secure-password-here"

# Optional salt (will be auto-generated if not specified)
# salt = "optional-salt-value"

[socks]
# SOCKS5 server listen address (client mode only)
listen_addr = "127.0.0.1:1080"

# Require SOCKS5 authentication
auth_required = false

# Optional SOCKS5 credentials
# username = "socks-user"
# password = "socks-pass"

[shapeshift.strategy]
# Strategy type: fixed, time-based, traffic-based, adaptive, or environment

## Example 1: Fixed protocol (no shape-shifting)
type = "fixed"
protocol = "https"

## Example 2: Time-based rotation
# type = "time-based"
# interval = "5m"  # Switch every 5 minutes
# sequence = ["https", "quic", "websocket", "dns", "tls13"]

## Example 3: Traffic-based rotation
# type = "traffic-based"
# bytes_threshold = 10485760  # 10 MB
# packet_threshold = 10000
# protocol_pool = ["https", "quic", "ssh", "websocket"]

## Example 4: Adaptive (detection-aware)
# type = "adaptive"
# switch_threshold = 0.7  # Switch if suspicion > 70%
# safe_protocols = ["https", "tls13"]  # Use when detected
# normal_protocols = ["quic", "websocket", "ssh"]  # Use normally

## Example 5: Environment-based (time of day)
# type = "environment"
# [[shapeshift.strategy.time_profiles]]
# hour_start = 9
# hour_end = 17
# protocols = ["https", "websocket"]  # Business hours
#
# [[shapeshift.strategy.time_profiles]]
# hour_start = 17
# hour_end = 23
# protocols = ["quic", "ssh", "tls13"]  # Evening

[traffic_shaping]
# Enable traffic shaping
enabled = true

# Packet size distribution: "normal", "uniform", or "exponential"
packet_size_distribution = "normal"

# Mean packet size (bytes)
mean_packet_size = 1400

# Standard deviation
stddev_packet_size = 200

# Inter-packet delay (microseconds)
mean_delay = 50
stddev_delay = 20

# Burst mode
enable_bursts = false
burst_size = 5
burst_probability = 0.1

[detection]
# Anti-detection features

# Randomize protocol fingerprints
enable_fingerprint_randomization = true

# Randomize timing patterns
enable_timing_randomization = true

# Mask TLS SNI (Server Name Indication)
enable_tls_sni_masking = false

# Suspicion threshold for adaptive strategies
suspicion_threshold = 0.7

# Generate decoy traffic
enable_decoy_traffic = false
decoy_traffic_rate = 0.1  # packets per second

# Server mode configuration (only for mode = "server")
[server]
# Listen address for incoming Nooshdaroo connections
listen_addr = "0.0.0.0:443"

# Forward address (e.g., Tor SOCKS port)
forward_addr = "127.0.0.1:9050"

# Forward protocol: "socks5", "http", or "tcp"
forward_proto = "socks5"
